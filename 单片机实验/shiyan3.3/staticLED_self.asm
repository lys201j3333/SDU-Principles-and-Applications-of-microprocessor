	ORG 000H
	AJMP MAIN
	ORG 0030H
MAIN:
	MOV SP,#60H
	MOV R0,#0
	MOV R1,#1
	SETB P3.0
	CLR F0
	
LOOP:
	JB P1.1,LOOP2

LOOP1:
	CLR F0
	MOV 30H,R0
	MOV 31H,R1
	SETB P3.0
	LCALL DISPLAY
LOOP2:
	JB P1.0,LOOP
LOOP3:
	LCALL DISPLAY
	LCALL DELAY1S
	LCALL ADJUST2
	JB F0,LOOP4
	LJMP LOOP3
LOOP4:
	CLR P3.0
	LCALL DELAY100MS
	SETB P3.0
	LCALL DELAY100MS
	
	JB P1.1,LOOP4
	LJMP LOOP1

DISPLAY:
	MOV A,30H
	MOV DPTR,#TABLE
	MOVC A,@A+DPTR
	MOV DPTR,#D1ADD
	MOVX @DPTR,A
	MOV A,31H
	MOV DPTR,#TABLE
	MOVC A,@A+DPTR
	MOV DPTR,#D10ADD
	MOVX @DPTR,A
	RET
	
ADJUST2:
	DEC 30H
	MOV A,30H
	CJNE A,#-1,GOTORET
	MOV 30H,#9
	DEC 31H
	MOV A,31H
	CJNE A,#-1,GOTORET
	SETB F0
	RET
	
GOTORET:
	RET
	
DELAY1S:MOV R7,#10
DL2:MOV R6,#200
DL1:MOV R5,#250

	DJNZ R5,$
DJNZ R6,DL1
DJNZ R7,DL2
RET

DELAY100MS:MOV R7,#200
	DL:MOV R6,#250
	DJNZ R6,$
	DJNZ R7,DL
	RET
	
TABLE:DB 0C0H,0F9H,0A4H,0B0H,99H,0F8H,80H,90H
D1ADD EQU 0FE00H
D10ADD EQU 0FD00H

END